데이터 삽입 


1. COUNTRIES

CREATE TABLE countries(
	country_id CHAR(2),
	country_name VARCHAR2(40),
	region_id NUMBER
);

INSERT INTO countries(country_id, country_name, region_id) VALUES('AR', 'Argentina', 2);
INSERT INTO countries(country_id, country_name, region_id) VALUES('AU', 'Australia', 3);
INSERT INTO countries(country_id, country_name, region_id) VALUES('BE', 'Belgium', 1);
INSERT INTO countries(country_id, country_name, region_id) VALUES('IT', 'Italy', 1);
COMMIT;


2. DEPARTMENTS 

CREATE TABLE departments(
	department_id NUMBER(4) ,
	department_name VARCHAR2(30) CONSTRAINT dept_name_nn NOT NULL,
	manager_id NUMBER(6),
	location_id NUMBER(4)
);
            
INSERT INTO departments(department_id, department_name,  manager_id, location_id ) VALUES(90,'Executive',100,1700);
INSERT INTO departments(department_id, department_name,  location_id ) VALUES(240, 'Government Sales', 1700);
INSERT INTO departments(department_id, department_name,  location_id ) VALUES(250, 'Retail Sales', 1700);


3. EMPLOYEES

CREATE TABLE employees(
    EMPLOYEE_ID NUMBER(6) NOT NULL,
    FIRST_NAME VARCHAR2(20),
    LAST_NAME VARCHAR2(25) NOT NULL,
    EMAIL VARCHAR2(25) NOT NULL,
    PHONE_NUMBER VARCHAR2(20),
    HIRE_DATE DATE NOT NULL,
    JOB_ID VARCHAR2(10) NOT NULL,
    SALARY NUMBER(8,2), 
    COMMISSION_PCT NUMBER(2,2),  
    MANAGER_ID NUMBER(6),    
    DEPARTMENT_ID NUMBER(4) 
);
select * from tab;

INSERT 
    INTO employees(EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,
                      JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID)
    VALUES(100,'Steven','King','SKING','515.123.4567','87/06/17','AD_PRES',24000,NULL,NULL,90);
INSERT 
    INTO employees(EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,
                      JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID)
    VALUES(101, 'Neena','Kochhar', 'NKOCHHAR', '515.123.4568', '89/09/21' ,'AD_VP', 17000, NULL, 100,90);
INSERT 
    INTO employees(EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,
                      JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID)
    VALUES(102,'Lex','De Haan','LDEHAAN','515.123.4569','93/01/13','AD_VP',17000,NULL,100,90);

COMMIT;   
SELECT * FROM employees;


4. JOBS

CREATE TABLE JOBS(
    JOB_ID VARCHAR2(10) NOT NULL PRIMARY KEY,
    JOB_TITLE VARCHAR2(35) NOT NULL,
    MIN_SALARY NUMBER(6),
    MAX_SALARY NUMBER(6)
);


INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('AD_PRES','President',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('AD_VP','Administration Vice President',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('AD_ASST','Administration Assistant',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('FI_MGR','Finance Manager',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('FI_ACCOUNT','Accountant',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('AC_MGR','Accounting Manager',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('AC_ACCOUNT','Public Accountant',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('SA_MAN','Sales Manager',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('SA_REP','Sales Representative',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('PU_MAN','Purchasing Manager',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('PU_CLERK','Purchasing Clerk',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('ST_MAN','Stock Manager',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('ST_CLERK','Stock Clerk',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('SH_CLERK','Shipping Clerk',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('IT_PROG','Programmer',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('MK_MAN','Marketing Manager',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('MK_REP','Marketing Representative',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('HR_REP','Human Resources Representative',20000,40000);
INSERT INTO JOBS(JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY) VALUES('PR_REP','Public Relations Representative',20000,40000);
   
COMMIT;
select * from jobs;

5. JOB_HISTORY
CREATE TABLE JOB_HISTORY(
    EMPLOYEE_ID NUMBER(6) NOT NULL,
    START_DATE DATE NOT NULL,
    END_DATE DATE NOT NULL,
    JOB_ID VARCHAR2(10) NOT NULL,
    DEPARTMENT_ID NUMBER(4)
);

INSERT INTO JOB_HISTORY(EMPLOYEE_ID, START_DATE, END_DATE, JOB_ID, DEPARTMENT_ID) VALUES('102', '93/01/13','98/07/24', 'IT_PROG',60);
INSERT INTO JOB_HISTORY(EMPLOYEE_ID, START_DATE, END_DATE, JOB_ID, DEPARTMENT_ID) VALUES('101', '89/09/21','93/10/27', 'AC_ACCOUNT',110);
INSERT INTO JOB_HISTORY(EMPLOYEE_ID, START_DATE, END_DATE, JOB_ID, DEPARTMENT_ID) VALUES('101', '93/10/28','97/03/15', 'AC_MGR',110);
INSERT INTO JOB_HISTORY(EMPLOYEE_ID, START_DATE, END_DATE, JOB_ID, DEPARTMENT_ID) VALUES('201', '96/02/17','99/12/19', 'MK_REP',20);
INSERT INTO JOB_HISTORY(EMPLOYEE_ID, START_DATE, END_DATE, JOB_ID, DEPARTMENT_ID) VALUES('114', '98/03/24','99/12/31', 'ST_CLERK',50);
INSERT INTO JOB_HISTORY(EMPLOYEE_ID, START_DATE, END_DATE, JOB_ID, DEPARTMENT_ID) VALUES('122', '99/01/01','99/12/31', 'ST_CLERK',50);
INSERT INTO JOB_HISTORY(EMPLOYEE_ID, START_DATE, END_DATE, JOB_ID, DEPARTMENT_ID) VALUES('200', '87/09/17','93/06/17', 'AD_ASST',90);
INSERT INTO JOB_HISTORY(EMPLOYEE_ID, START_DATE, END_DATE, JOB_ID, DEPARTMENT_ID) VALUES('176', '98/03/24','98/12/31', 'SA_REP',80);
INSERT INTO JOB_HISTORY(EMPLOYEE_ID, START_DATE, END_DATE, JOB_ID, DEPARTMENT_ID) VALUES('176', '99/01/01','99/12/31', 'SA_MAN',80);
INSERT INTO JOB_HISTORY(EMPLOYEE_ID, START_DATE, END_DATE, JOB_ID, DEPARTMENT_ID) VALUES('200', '94/07/01','98/12/31', 'AC_ACCOUNT',90);

COMMIT;
SELECT * FROM JOB_HISTORY;

TRUNCATE TABLE JOB_HISTORY;

6. LOCATIONS

CREATE TABLE LOCATIONS (
	LOCATION_ID NUMBER(4)
	,STREET_ADDRESS VARCHAR2(40)
	,POSTAL_CODE VARCHAR2(12)
	,CITY VARCHAR2(30) CONSTRAINT LOC_CITY_NN NOT NULL
	,STATE_PRIVINCE VARCHAR2(25)
	,COUNTRY_ID CHAR(2)
	);
	
	
INSERT INTO LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,COUNTRY_ID)
VALUES(1001,'1297 Via Cola di Rie','00989','Roma','IT');
INSERT INTO LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PRIVINCE,COUNTRY_ID)
VALUES(2200,'12-98 Victoria Street', '2901', 'Sydney', 'New South Wales' ,'AU');
INSERT INTO LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PRIVINCE,COUNTRY_ID)
VALUES(1700,'2004 Charade Rd','98199','Seattle','Washington','US');
COMMIT;


7. REGIONS

CREATE TABLE REGIONS (
       REGION_ID NUMBER PRIMARY KEY
       ,REGION_NAME VARCHAR2(25) 
);

-- REGIONS 테이블 데이터 삽입 
INSERT INTO REGIONS(REGION_ID,REGION_NAME)
VALUES (1, 'Europe');

INSERT INTO REGIONS(REGION_ID,REGION_NAME)
VALUES (2, 'Americas');

INSERT INTO REGIONS(REGION_ID,REGION_NAME)
VALUES (3, 'Asia');

INSERT INTO REGIONS(REGION_ID,REGION_NAME)
VALUES (4, 'Middle East and Africa');

-- REGIONS 테이블 확인
DESC REGIONS;
SELECT * FROM REGIONS;


---
각종 제약조건 설정

ALTER TABLE countries ADD CONSTRAINT country_c_id_pk PRIMARY KEY (country_id);
ALTER TABLE countries ADD CONSTRAINT country_id_nn CHECK (country_id IS NOT NULL);

ALTER TABLE departments ADD CONSTRAINT dept_id_pk PRIMARY KEY (department_id);

ALTER TABLE employees ADD CONSTRAINT EMP_EMP_ID_PK PRIMARY KEY(EMPLOYEE_ID);
ALTER TABLE employees ADD CONSTRAINT EMP_EMAIL_UK UNIQUE(EMAIL);
ALTER TABLE employees ADD CONSTRAINT EMP_SALARY_MIN CHECK(salary > 0);

ALTER TABLE JOB_HISTORY ADD CONSTRAINT JHIST_EMP_ID_ST_DATE_PK PRIMARY KEY(EMPLOYEE_ID, START_DATE);
ALTER TABLE JOB_HISTORY ADD CONSTRAINT JHIST_DATE_INTERVAL CHECK(end_date>start_date);


ALTER TABLE LOCATIONS ADD CONSTRAINT LOC_ID_PK PRIMARY KEY(LOCATION_ID); --로케이션아이디 기본키로 추가


--
외래키

ALTER TABLE countries ADD CONSTRAINT countr_reg_fk FOREIGN KEY (region_id) REFERENCES regions(region_id);
ALTER TABLE departments ADD CONSTRAINT dept_loc_fk FOREIGN KEY (location_id) REFERENCES locations(location_id);
ALTER TABLE departments ADD CONSTRAINT dept_mgr_fk FOREIGN KEY (manager_id) REFERENCES employees(employee_id);
            
ALTER TABLE JOB_HISTORY ADD CONSTRAINT JHIST_DEPT_FK FOREIGN KEY(DEPARTMENT_ID) REFERENCES DEPARTMENTS(DEPARTMENT_ID);
ALTER TABLE JOB_HISTORY ADD CONSTRAINT JHIST_JOB_FK FOREIGN KEY(JOB_ID) REFERENCES JOBS(JOB_ID);
ALTER TABLE JOB_HISTORY ADD CONSTRAINT JHIST_EMP_FK FOREIGN KEY(EMPLOYEE_ID) REFERENCES EMPLOYEES(EMPLOYEE_ID);

ALTER TABLE LOCATIONS ADD CONSTRAINT  LOK_C_ID_FK FOREIGN KEY(COUNTRY_ID) REFERENCES COUNTRIES(COUNTRY_ID) ;	
